"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isRawHttpRequest=exports.makeHttpRequestData=void 0;function makeHttpRequestData(req,res,latencyMilliseconds){let requestUrl,protocol,requestMethod,userAgent,referer,status,responseSize,latency;if(req.url)requestUrl=req.url;if("originalUrl"in req&&req.originalUrl)requestUrl=req.originalUrl;if(requestUrl){try{const url=new URL(requestUrl);protocol=url.protocol}catch(e){}}req.method?requestMethod=req.method:null;if(req.headers&&req.headers["user-agent"]){req.headers["user-agent"]?userAgent=req.headers["user-agent"]:null;req.headers["referer"]?referer=req.headers["referer"]:null}if(res){res.statusCode?status=res.statusCode:null;responseSize=res.getHeader&&Number(res.getHeader("Content-Length"))||0}if(latencyMilliseconds){latency={seconds:Math.floor(latencyMilliseconds/1e3),nanos:Math.floor(latencyMilliseconds%1e3*1e6)}}return Object.assign({},requestUrl?{requestUrl:requestUrl}:null,protocol?{protocol:protocol}:null,requestMethod?{requestMethod:requestMethod}:null,userAgent?{userAgent:userAgent}:null,referer?{referer:referer}:null,responseSize?{responseSize:responseSize}:null,status?{status:status}:null,latency?{latency:latency}:null)}exports.makeHttpRequestData=makeHttpRequestData;function isRawHttpRequest(req){if(req&&("originalUrl"in req||"headers"in req||"method"in req||"url"in req)){return true}return false}exports.isRawHttpRequest=isRawHttpRequest;
//# sourceMappingURL=http-request.js.map